import {
  h,
  s,
  webNamespaces
} from "./chunk-DYUUAP6A.js";
import "./chunk-EVHXLNAN.js";
import "./chunk-DC5AMYBS.js";

// node_modules/hast-util-from-dom/lib/index.js
function fromDom(tree, options) {
  const result = tree ? transform(tree, options || {}) : void 0;
  return result || { type: "root", children: [] };
}
function transform(node, options) {
  const transformed = one(node, options);
  if (transformed && options.afterTransform)
    options.afterTransform(node, transformed);
  return transformed;
}
function one(node, options) {
  switch (node.nodeType) {
    case 1: {
      return element(node, options);
    }
    // Ignore: Attr (2).
    case 3: {
      return text(node);
    }
    // Ignore: CDATA (4).
    // Removed: Entity reference (5)
    // Removed: Entity (6)
    // Ignore: Processing instruction (7).
    case 8: {
      return comment(node);
    }
    case 9: {
      return root(node, options);
    }
    case 10: {
      return doctype();
    }
    case 11: {
      return root(node, options);
    }
    default: {
      return void 0;
    }
  }
}
function root(node, options) {
  return { type: "root", children: all(node, options) };
}
function doctype() {
  return { type: "doctype" };
}
function text(node) {
  return { type: "text", value: node.nodeValue || "" };
}
function comment(node) {
  return { type: "comment", value: node.nodeValue || "" };
}
function element(node, options) {
  const space = node.namespaceURI;
  const fn = space === webNamespaces.svg ? s : h;
  const tagName = space === webNamespaces.html ? node.tagName.toLowerCase() : node.tagName;
  const content = (
    // @ts-expect-error Types are wrong.
    space === webNamespaces.html && tagName === "template" ? node.content : node
  );
  const attributes = node.getAttributeNames();
  const props = {};
  let index = -1;
  while (++index < attributes.length) {
    props[attributes[index]] = node.getAttribute(attributes[index]) || "";
  }
  return fn(tagName, props, all(content, options));
}
function all(node, options) {
  const nodes = node.childNodes;
  const children = [];
  let index = -1;
  while (++index < nodes.length) {
    const child = transform(nodes[index], options);
    if (child !== void 0) {
      children.push(child);
    }
  }
  return children;
}
export {
  fromDom
};
//# sourceMappingURL=hast-util-from-dom-K4YOVTPY.js.map
